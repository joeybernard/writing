Nightfall on Linux

Over several past articles, we have looked at general astronomy programs that are helpful for many tasks you might need to do in your stargazing career. There are several specific jobs that are more complicated and require specialized software to make the relevant calculations. This month, we will look at nightfall. Nightfall is a program that can handle calculations involving binary star systems. It can animate binary star systems, taking into account not only orbital speeds but also rotational motion and the changing of the shape of the stars due to their close positions. You can model what it would look like and what kind of light curves you would register when observing a binary system. You can even take a set of actual observational data and find a best-fit model for the system you are looking at. Most distributions don't include a package for nightfall, so you will need to build it from source. There are several dependencies, so the instructions following will assume that you are using a Debian-based distribution. If you are using something else, you should be able to find the comparable packages for your distribution of choice. To install the dependencies, you will need to run the command
   sudo apt-get install libgtk2.0-0 libgtk2.0-dev gnuplot
Nightfall also includes the ability to use OpenGL to handle 3D rendering of animations of the binary systems you want to model. If you want to use OpenGL, you will also need to install
   sudo apt-get install libgl1-mesa-dev freeglut3-dev libgtkgl2.0-dev libjpeg62-dev
Once all of the requirements are installed, you can install nightfall itself. You should change directory into a temporary or source directory where you can do the unpacking and building of the code. Once you are there, you can download the latest version of nightfall with
   wget http://www.la-samhna.de/nightfall/nightfall-1.88.tar.gz
and unpack it with
   tar xvzf nightfall-1.88.tar.gz
When you go to configure nightfall, you will probably want to include the OpenMP option. This will allow nightfall to use the multiple CPU's that you probably have in your machine to speed up the calculations involved. You can build and install nightfall with
   ./configure --enable-openmp
   make
   sudo make install
This will install nightfall under the /usr/local directory. You can then start nightfall up with [nightfall1.png]
   nightfall -U
The '-U' option is necessary to force the GUI to be used interactively.

Now that nightfall is up and running, you can start to get the idea of just how much control you have over the model that is being simulated. The first tab is where you can set up the core parameters for your binary system model. You can set the mass ratio and the inclination of the two stars. You can also set the surface temperatures and the Roche lobe filling factors for each of the stars. The temperature helps define their luminosities and the Roche lobe filling factors define the distortion of the stars. Depending on the exact conditions, you may have an accretion disk of material around the central star. The second tab lets you set the type of accretion disk (i.e., how it interacts with the central star), along with more physical parameters like the inner and outer diameters and the temperature. The advanced tab allows you to set some less obvious parameters for your model. You can set the eccentricity for the orbiting star, and whether you need to also model the atmosphere. You can now click on the 'Compute' button at the top of the window. On most modern machines, this will happen pretty quickly. Once the calculations are done, you can plot the output from the system you just modeled. The 'Output' menu item on the menubar at the top gives you several options on how to display the calculated results. The first entry is 'PlotCurve', which draws the light curve as seen from a distant observer. [nightfall2.png] Gnuplot is used to draw the actual plot of the visible amount of light that is seen. The second output option is to select 'ViewGeometry'. [nightfall3.png] This plot shows you how the stars themselves are distorted within their orbits. The 'StarView...' menu item presents a view of how the binary system would look from your observation point. [nightfall4.png] A control box also pops up that allows you to change the inclination of the orbital plane and the phase of the orbit. The menu item 'RocheSlicer...' gives you a way to visualize just how distorted the stars become. [nightfall5.png] A control box also pops up that lets you select various slices through the star system. The last menu item is the 'DataSheet...' option. [nightfall6.png] This option pops up a new window with a text description of the results of all of the calculations that were made. One of the keys in science is being able to reproduce your results, both experimental and computational. With this in mind, you can save the model that you just ran, and load it again later. These models are saved as configurations by clicking the menu item 'File->Save Configuration...'. You can load previous models by clicking the menu item 'File->Open config file...'. If you compiled and installed nightfall using the instructions above, then you will have a number of example configurations available that you can play with.

Nightfall is not only useful in determining what a given binary star system would look like, but you can also feed in your own observational data and calculate a best fit model to those observations. You can load your observational data by clicking the menu item 'File->Open data file...'. Again, if you compiled and installed nightfall following the instructions above, you will have several sample data files that you can load and play with. You probably should click on the menu item 'File->Clear memory' first. Once the data is loaded, select the 'Data Fitting' tab in the main window. You then need to select the 'Mass' and/or 'Separation' buttons as parameters for the fitting. You can then select the 'FIT with tolerance' button, using the tolerance you enter within the text box. You can also select whether or not to use simulated annealing, or whether or not to use Monte Carlo methods. You may want to do some literature searches to see how active astronomers use these parameters to find best fit models.

The last thing to notice is that almost everything you can do with the GUI is also doable with command line options. This means that you can generate many different models, with different sets of parameters, and have the relevant plots and output data generated automatically. This way, you can farm out the work to some cluster of machines. But this is starting to move into the realm of 'professional' astronomy.


IMAGES
nightfall1.png  -  The GUI lets you set all kinds of options within nightfall to set up your model.
nightfall2.png  -  Once the calculation is done, you can plot the observed light curve.
nightfall3.png  -  You can plot the geometry of the stars within the binary system.
nightfall4.png  -  The StarView lets you see the binary system from some distance away.
nightfall5.png  -  The RocheSlicer lets you investigate the distortions in the stars of your binary system.
nightfall6.png  -  The DataSheet gives you the detailed numerical results of your simulation.


URLS
http://www.hs.uni-hamburg.de/DE/Ins/Per/Wichmann/Nightfall.html  -  Main distribution web site
